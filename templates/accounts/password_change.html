{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Đổi mật khẩu · NavyBaby{% endblock %}

{% block navbar_icon %}settings{% endblock %}
{% block navbar_title %}Đổi mật khẩu{% endblock %}

{% block content %}
<div class="max-w-md mx-auto">
  <div class="bg-[#121212] border border-gray-800 rounded-xl shadow-xl overflow-hidden">
    <div class="px-6 pt-6 pb-4 text-center">
      <h2 class="text-xl font-semibold text-gray-100">Cập nhật mật khẩu</h2>
    </div>
    <div class="px-6 pb-6">
      {% if form.non_field_errors %}
        <div class="mb-3 p-3 rounded-md border border-red-900/40 bg-red-900/20 text-red-300 text-sm">
          {{ form.non_field_errors }}
        </div>
      {% endif %}
      <form method="post" class="space-y-4">
        {% csrf_token %}

        <div>
          <label class="block text-sm text-gray-400 mb-1" for="id_old_password">Mật khẩu hiện tại</label>
          <div class="relative">
            <i data-lucide="lock" class="w-4 h-4 text-gray-500 absolute left-3 top-2.5"></i>
            {{ form.old_password|add_class:"bg-[#1f1f1f] border border-gray-700 rounded-md pl-9 pr-3 py-2 w-full text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-gray-600" }}
          </div>
          {% if form.old_password.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.old_password.errors.0 }}</p>
          {% endif %}
        </div>

        <div>
          <label class="block text-sm text-gray-400 mb-1" for="id_new_password1">Mật khẩu mới</label>
          <div class="relative">
            <i data-lucide="lock" class="w-4 h-4 text-gray-500 absolute left-3 top-2.5"></i>
            {{ form.new_password1|add_class:"bg-[#1f1f1f] border border-gray-700 rounded-md pl-9 pr-10 py-2 w-full text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-gray-600" }}
          </div>
          {% if form.new_password1.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.new_password1.errors.0 }}</p>
          {% endif %}
          {% if form.new_password1.help_text %}
            <p class="text-xs text-gray-500 mt-1">{{ form.new_password1.help_text|safe }}</p>
          {% endif %}
        </div>

        <div>
          <label class="block text-sm text-gray-400 mb-1" for="id_new_password2">Xác nhận mật khẩu mới</label>
          <div class="relative">
            <i data-lucide="lock" class="w-4 h-4 text-gray-500 absolute left-3 top-2.5"></i>
            {{ form.new_password2|add_class:"bg-[#1f1f1f] border border-gray-700 rounded-md pl-9 pr-10 py-2 w-full text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-gray-600" }}
          </div>
          {% if form.new_password2.errors %}
            <p class="text-red-400 text-xs mt-1">{{ form.new_password2.errors.0 }}</p>
          {% endif %}
        </div>

        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-medium py-2.5 rounded-md transition">Cập nhật</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
